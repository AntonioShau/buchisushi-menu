<!doctype html>
<html lang="es">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Buchi Sushi - Men√∫</title>
    <style>
        :root {
            --accent: #e41e2b;
            --muted: #666;
            --card: #ffffff;
            --bg: #faf7f5;
            --shadow: 0 6px 18px rgba(0, 0, 0, 0.06);
        }

        * {
            box-sizing: border-box
        }

        body {
            margin: 0;
            font-family: "Helvetica Neue", Arial, sans-serif;
            background: var(--bg);
            color: #222;
            -webkit-font-smoothing: antialiased;
        }

        header {
            background: linear-gradient(90deg, var(--accent), #c40000);
            color: white;
            padding: 22px;
            text-align: center;
            font-weight: 700;
            font-size: 20px;
            letter-spacing: 0.6px;
        }

        .container {
            max-width: 1100px;
            margin: 18px auto;
            padding: 0 16px 60px;
        }

        .grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 16px;
        }

        @media(min-width:900px) {
            .grid {
                grid-template-columns: 1fr 360px;
            }
        }

        .menu {
            background: transparent;
        }

        .section {
            margin-bottom: 10px;
        }

        .section h2 {
            margin: 6px 0 10px;
            font-size: 18px;
            color: var(--accent);
        }

        .dish {
            background: var(--card);
            border-radius: 10px;
            padding: 12px;
            padding-top: 16px;
            margin-bottom: 10px;
            box-shadow: var(--shadow);
        }

        .dish-img {
            width: 100%;
            aspect-ratio: 16 / 9;
            /* fuerza 16:9 */
            height: auto;
            object-fit: cover;
            object-position: center;
            display: block;
            border-radius: 10px;
            margin: 10px 0;
        }

        .dish h3 {
            margin: 0;
            font-size: 16px;
            color: #111;
        }

        .dish .price {
            float: right;
            color: var(--accent);
            font-weight: 700;
        }

        .dish p {
            margin: 6px 0 10px;
            color: var(--muted);
            font-size: 14px;
        }

        .fab {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #ff6b00;
            color: white;
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            font-size: 28px;
            cursor: pointer;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.3);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 999;
        }

        .fab:hover {
            background-color: #e65d00;
        }

        .badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: red;
            color: white;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            font-size: 14px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
        }


        label {
            display: block;
            font-size: 13px;
            color: #444;
            margin-top: 6px
        }

        select,
        input[type="number"],
        input[type="text"] {
            width: 100%;
            padding: 8px 10px;
            margin-top: 6px;
            border-radius: 8px;
            border: 1px solid #d0d0d0;
            font-size: 14px;
        }

        .inline-row {
            display: flex;
            gap: 8px
        }

        .inline-row>* {
            flex: 1
        }

        .btn {
            display: inline-block;
            width: 100%;
            padding: 10px;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            font-size: 15px;
            margin-top: 8px;
        }

        .btn.secondary {
            background: #444;
            color: #fff
        }

        aside {
            position: relative;
            top: 0;
        }

        #orderBox {
            background: #fffbe6;
            padding: 12px;
            border-radius: 10px;
            box-shadow: var(--shadow);
        }

        #orderText {
            white-space: normal;
            font-family: monospace;
            font-size: 14px;
            color: #111
        }

        .small {
            font-size: 12px;
            color: var(--muted)
        }

        footer {
            text-align: center;
            color: #666;
            margin: 24px 0 40px;
            font-size: 13px;
        }
    </style>
</head>

<body>
    <header>Buchi Sushi ‚Äî Men√∫ Digital</header>

    <div class="container">
        <div class="grid">
            <!-- MENU (izquierda) -->
            <main class="menu">
                <!-- BOTANAS -->
                <section class="section horizontal-scroll">
                    <h2>üç§ Botanas</h2>

                    <!-- Botana Cl√°sica -->
                    <div class="dish" data-price="150" data-hassalsas="true">

                        <img src="images/coming-soon.png" class="dish-img" alt="Botana Cl√°sica">

                        <h3>Botana Cl√°sica <span class="price">$150</span></h3>
                        <p>Fajitas de pollo empanizado ba√±adas en 2 salsas a elegir, crujientes papas a la francesa,
                            aderezo ranch y jalape√±o.</p>

                        <label>Salsa 1</label>
                        <select class="s1">
                            <option value="">Selecciona</option>
                        </select>

                        <label>Salsa 2</label>
                        <select class="s2">
                            <option value="">Selecciona</option>
                        </select>

                        <label>Cantidad</label>
                        <input type="number" class="qty" value="1" min="1">

                        <button class="btn" onclick="addToOrder(this,'Botana Cl√°sica')">Agregar</button>
                    </div>


                    <!-- Botana Completa -->
                    <div class="dish" data-price="165" data-hassalsas="true">

                        <img src="images/coming-soon.png" class="dish-img" alt="Botana Completa">

                        <h3>Botana Completa <span class="price">$165</span></h3>
                        <p>Fajitas de pollo empanizado ba√±adas en 2 salsas a elegir, crujientes papas a la francesa,
                            aros de cebolla y aderezo.</p>

                        <label>Salsa 1</label>
                        <select class="s1">
                            <option>Selecciona</option>
                        </select>

                        <label>Salsa 2</label>
                        <select class="s2">
                            <option>Selecciona</option>
                        </select>

                        <label>Cantidad</label>
                        <input type="number" class="qty" value="1" min="1">
                        <button class="btn" onclick="addToOrder(this,'Botana Completa')">Agregar</button>
                    </div>

                    <!-- Botana Especial 1 -->
                    <div class="dish" data-price="210" data-hassalsas="true">

                        <img src="images/coming-soon.png" class="dish-img" alt="Botana Especial 1">

                        <h3>Botana Especial 1 <span class="price">$210</span></h3>
                        <p>Fajitas de pollo empanizado ba√±adas en 2 salsas, con papas, aros de cebolla y jalape√±o.</p>

                        <label>Salsa 1</label>
                        <select class="s1">
                            <option>Selecciona</option>
                        </select>

                        <label>Salsa 2</label>
                        <select class="s2">
                            <option>Selecciona</option>
                        </select>

                        <label>Cantidad</label>
                        <input type="number" class="qty" value="1" min="1">
                        <button class="btn" onclick="addToOrder(this,'Botana Especial 1')">Agregar</button>
                    </div>

                    <!-- Botana Especial 2 -->
                    <div class="dish" data-price="215" data-hassalsas="true">

                        <img src="images/coming-soon.png" class="dish-img" alt="Botana Especial 2">

                        <h3>Botana Especial 2 <span class="price">$215</span></h3>
                        <p>Fajitas y rollo BuchiRoll con salsas a elecci√≥n, papas y aderezo.</p>

                        <label>Salsa 1</label>
                        <select class="s1">
                            <option>Selecciona</option>
                        </select>

                        <label>Salsa 2</label>
                        <select class="s2">
                            <option>Selecciona</option>
                        </select>

                        <label>Cantidad</label>
                        <input type="number" class="qty" value="1" min="1">
                        <button class="btn" onclick="addToOrder(this,'Botana Especial 2')">Agregar</button>
                    </div>

                    <!-- Para Compartir -->
                    <div class="dish" data-price="260" data-hassalsas="true">

                        <img src="images/coming-soon.png" class="dish-img" alt="Para Compartir">

                        <h3>Para Compartir <span class="price">$260</span></h3>
                        <p>Combo grande de fajitas de pollo empanizado ba√±adas en 2 salsas a elegir, rollo completo,
                            aros de cebolla y papas.</p>

                        <label>Salsa 1</label>
                        <select class="s1">
                            <option>Selecciona</option>
                        </select>

                        <label>Salsa 2</label>
                        <select class="s2">
                            <option>Selecciona</option>
                        </select>

                        <label>Cantidad</label>
                        <input type="number" class="qty" value="1" min="1">
                        <button class="btn" onclick="addToOrder(this,'Para Compartir')">Agregar</button>
                    </div>

                </section>

                <!-- COMBOS BOTANA -->
                <section class="section">
                    <h2>üç± Combos Botana</h2>

                    <div class="dish" data-price="175" data-hassalsas="true">

                        <img src="images/coming-soon.png" class="dish-img" alt="Combo Buchi">

                        <h3>Combo Buchi <span class="price">$175</span></h3>
                        <p>Delicioso Buchi Roll acompa√±ado de fajitas de pollo empanizadas ba√±adas en la salsa de tu
                            preferencia y papas a la francesa.</p>

                        <label>Salsa 1</label><select class="s1">
                            <option>Selecciona</option>
                        </select>
                        <label>Salsa 2</label><select class="s2">
                            <option>Selecciona</option>
                        </select>

                        <label>Cantidad</label><input type="number" class="qty" value="1" min="1">
                        <button class="btn" onclick="addToOrder(this,'Combo Buchi')">Agregar</button>
                    </div>

                    <div class="dish" data-price="180">

                        <img src="images/coming-soon.png" class="dish-img" alt="HamburgueSushi Cruji">

                        <h3>HamburgueSushi Cruji <span class="price">$180</span></h3>
                        <p>Hamburguesa crujiente con porci√≥n de roll; incluye papas y aderezo.</p>

                        <label>Cantidad</label><input type="number" class="qty" value="1" min="1">
                        <button class="btn" onclick="addToOrder(this,'HamburgueSushi Cruji')">Agregar</button>
                    </div>

                    <div class="dish" data-price="165">

                        <img src="images/coming-soon.png" class="dish-img" alt="HamburgueSushi Cl√°sica">

                        <h3>HamburgueSushi Cl√°sica <span class="price">$165</span></h3>
                        <p>Hamburguesa cl√°sica acompa√±ada de papas y medio BuchiRoll.</p>

                        <label>Cantidad</label><input type="number" class="qty" value="1" min="1">
                        <button class="btn" onclick="addToOrder(this,'HamburgueSushi Cl√°sica')">Agregar</button>
                    </div>

                </section>

                <!-- CHAROLAS -->
                <section class="section">
                    <h2>üçΩÔ∏è Charolas</h2>

                    <div class="dish" data-price="280" data-hassalsas="true">

                        <img src="images/coming-soon.png" class="dish-img" alt="Oriental Mini">

                        <h3>Oriental Mini <span class="price">$280</span></h3>
                        <p>1 BuchiRoll, 1 NoriMaki, 1 porci√≥n de arroz frito, 1 orden de ensalada de pepino y 2 bolitas
                            de salsa tampico.</p>

                        <label>Salsa 1</label><select class="s1">
                            <option>Selecciona</option>
                        </select>
                        <label>Salsa 2</label><select class="s2">
                            <option>Selecciona</option>
                        </select>

                        <label>Cantidad</label><input type="number" class="qty" value="1" min="1">
                        <button class="btn" onclick="addToOrder(this,'Oriental Mini')">Agregar</button>
                    </div>

                    <div class="dish" data-price="300" data-hassalsas="true">

                        <img src="images/coming-soon.png" class="dish-img" alt="Fucky">

                        <h3>Fucky <span class="price">$300</span></h3>
                        <p>2 hamburguesas cl√°sicas o pollo empanizado ba√±adas en 2 salsas a elegir y aderezos.</p>

                        <label>Salsa 1</label><select class="s1">
                            <option>Selecciona</option>
                        </select>
                        <label>Salsa 2</label><select class="s2">
                            <option>Selecciona</option>
                        </select>

                        <label>Cantidad</label><input type="number" class="qty" value="1" min="1">
                        <button class="btn" onclick="addToOrder(this,'Fucky')">Agregar</button>
                    </div>

                    <div class="dish" data-price="340" data-hassalsas="true">

                        <img src="images/coming-soon.png" class="dish-img" alt="Estuche">

                        <h3>Estuche <span class="price">$340</span></h3>
                        <p>1 BuchiRoll, 1 YuyuRoll, fajitas de pollo empanizadas ba√±adas en 2 salsas de tu preferencia,
                            papas y aderezos.</p>

                        <label>Salsa 1</label><select class="s1">
                            <option>Selecciona</option>
                        </select>
                        <label>Salsa 2</label><select class="s2">
                            <option>Selecciona</option>
                        </select>

                        <label>Cantidad</label>
                        <input type="number" class="qty" value="1" min="1">
                        <button class="btn" onclick="addToOrder(this,'Estuche')">Agregar</button>
                    </div>

                    <div class="dish" data-price="450" data-hassalsas="true">

                        <img src="images/coming-soon.png" class="dish-img" alt="Cachu">

                        <h3>Cachu <span class="price">$450</span></h3>
                        <p>CachuRoll + BuchiRoll + NoriMaki + fajitas de pollo ba√±adas en 2 salsas de tu preferencia.
                        </p>

                        <label>Salsa 1</label><select class="s1">
                            <option>Selecciona</option>
                        </select>
                        <label>Salsa 2</label><select class="s2">
                            <option>Selecciona</option>
                        </select>

                        <label>Cantidad</label>
                        <input type="number" class="qty" value="1" min="1">
                        <button class="btn" onclick="addToOrder(this,'Cachu')">Agregar</button>
                    </div>

                    <div class="dish" data-price="580" data-hassalsas="true">

                        <img src="images/coming-soon.png" class="dish-img" alt="Yuyu">

                        <h3>Yuyu <span class="price">$580</span></h3>
                        <p>YuyuRoll, NevadoRoll, 2 BuchiRoll, arroz frito con camar√≥n, ensalada de pepino y 5 bolitas de
                            salsa tampico.</p>

                        <label>Salsa 1</label><select class="s1">
                            <option>Selecciona</option>
                        </select>
                        <label>Salsa 2</label><select class="s2">
                            <option>Selecciona</option>
                        </select>

                        <label>Cantidad</label>
                        <input type="number" class="qty" value="1" min="1">
                        <button class="btn" onclick="addToOrder(this,'Yuyu')">Agregar</button>
                    </div>

                    <div class="dish" data-price="640" data-hassalsas="true">

                        <img src="images/coming-soon.png" class="dish-img" alt="Buchi">

                        <h3>Buchi <span class="price">$640</span></h3>
                        <p>1 BuchiRoll, 1 CocoRoll, 1 YuyuRoll, 1 NoriMaki, fajitas de pollo en 2 salsas, papas y
                            aderezos.</p>

                        <label>Salsa 1</label><select class="s1">
                            <option>Selecciona</option>
                        </select>
                        <label>Salsa 2</label><select class="s2">
                            <option>Selecciona</option>
                        </select>

                        <label>Cantidad</label>
                        <input type="number" class="qty" value="1" min="1">
                        <button class="btn" onclick="addToOrder(this,'Buchi')">Agregar</button>
                    </div>

                    <div class="dish" data-price="750" data-hassalsas="true">

                        <img src="images/coming-soon.png" class="dish-img" alt="Big Shau">

                        <h3>Big Shau <span class="price">$750</span></h3>
                        <p>4 hamburguesas cl√°sicas, pollo empanizado ba√±ado en 2 salsas, papas a la francesa y aderezos.
                        </p>

                        <label>Salsa 1</label><select class="s1">
                            <option>Selecciona</option>
                        </select>
                        <label>Salsa 2</label><select class="s2">
                            <option>Selecciona</option>
                        </select>

                        <label>Cantidad</label>
                        <input type="number" class="qty" value="1" min="1">
                        <button class="btn" onclick="addToOrder(this,'Big Shau')">Agregar</button>
                    </div>

                </section>

                <!-- ROLLOS -->
                <section class="section">
                    <h2>üç£ Rollos ‚Äî Calientes / Fr√≠os</h2>

                    <div class="dish" data-price="115">

                        <img src="images/coming-soon.png" class="dish-img" alt="Buchi Roll">

                        <h3>Buchi Roll <span class="price">$115</span></h3>
                        <p>Rollo empanizado con relleno de camar√≥n, surimi, pepino, aguacate y queso crema.</p>
                        <label>Cantidad</label><input type="number" class="qty" value="1" min="1">
                        <button class="btn" onclick="addToOrder(this,'Buchi Roll')">Agregar</button>
                    </div>

                    <div class="dish" data-price="115">

                        <img src="images/coming-soon.png" class="dish-img" alt="Yuyu Roll">

                        <h3>Yuyu Roll <span class="price">$115</span></h3>
                        <p>Relleno de camar√≥n, surimi, aguacate y queso crema, ba√±ado en ajonjol√≠ negro (versi√≥n fr√≠a).
                        </p>
                        <label>Cantidad</label><input type="number" class="qty" value="1" min="1">
                        <button class="btn" onclick="addToOrder(this,'Yuyu Roll')">Agregar</button>
                    </div>

                    <div class="dish" data-price="125">

                        <img src="images/coming-soon.png" class="dish-img" alt="CocoRoll">

                        <h3>CocoRoll <span class="price">$125</span></h3>
                        <p>Rollo empanizado de coco, relleno de camar√≥n, aguacate y queso crema, coronado con tampico y
                            anguila.</p>
                        <label>Cantidad</label><input type="number" class="qty" value="1" min="1">
                        <button class="btn" onclick="addToOrder(this,'CocoRoll')">Agregar</button>
                    </div>

                    <div class="dish" data-price="120">

                        <img src="images/coming-soon.png" class="dish-img" alt="TampicoRoll">

                        <h3>TampicoRoll <span class="price">$120</span></h3>
                        <p>Rollo empanizado con salsa tampico, aguacate y pepino, ba√±ado en chipotle.</p>
                        <label>Cantidad</label><input type="number" class="qty" value="1" min="1">
                        <button class="btn" onclick="addToOrder(this,'TampicoRoll')">Agregar</button>
                    </div>

                    <div class="dish" data-price="130">

                        <img src="images/coming-soon.png" class="dish-img" alt="CachuRoll">

                        <h3>CachuRoll <span class="price">$130</span></h3>
                        <p>Rollo empanizado cubierto con Flamin'Hot, relleno de camar√≥n, surimi y queso crema.</p>
                        <label>Cantidad</label><input type="number" class="qty" value="1" min="1">
                        <button class="btn" onclick="addToOrder(this,'CachuRoll')">Agregar</button>
                    </div>

                </section>

                <!-- COMPLEMENTOS -->
                <section class="section">
                    <h2>üçö Complementos & Porciones</h2>

                    <div class="dish" data-price="70">

                        <img src="images/coming-soon.png" class="dish-img" alt="Papa Nachos">

                        <h3>Papa Nachos <span class="price">$70</span></h3>
                        <label>Cantidad</label><input type="number" class="qty" value="1" min="1">
                        <button class="btn" onclick="addToOrder(this,'Papa Nachos')">Agregar</button>
                    </div>

                    <div class="dish" data-price="50">

                        <img src="images/coming-soon.png" class="dish-img" alt="Papas a la Francesa">

                        <h3>Papas a la Francesa <span class="price">$50</span></h3>
                        <p>Porci√≥n completa / porci√≥n chica seg√∫n selecci√≥n dentro del pedido (puedes indicar en
                            comentarios)</p>
                        <label>Cantidad</label><input type="number" class="qty" value="1" min="1">
                        <button class="btn" onclick="addToOrder(this,'Papas a la Francesa')">Agregar</button>
                    </div>

                    <div class="dish" data-price="50">

                        <img src="images/coming-soon.png" class="dish-img" alt="Arroz Frito">

                        <h3>Arroz Frito con Verduras <span class="price">$50</span></h3>
                        <label>Cantidad</label><input type="number" class="qty" value="1" min="1">
                        <button class="btn" onclick="addToOrder(this,'Arroz Frito con Verduras')">Agregar</button>
                    </div>

                </section>

                <!-- BEBIDAS -->
                <section class="section">
                    <h2>ü•§ Bebidas</h2>

                    <div class="dish" data-price="60">

                        <img src="images/coming-soon.png" class="dish-img" alt="Frappe">

                        <h3>Frappe (varios sabores) <span class="price">$60</span></h3>
                        <label>Cantidad</label><input type="number" class="qty" value="1" min="1">
                        <button class="btn" onclick="addToOrder(this,'Frappe')">Agregar</button>
                    </div>

                    <div class="dish" data-price="30">

                        <img src="images/coming-soon.png" class="dish-img" alt="Refresco 600ml">

                        <h3>Refresco (600ml) <span class="price">$30</span></h3>
                        <label>Cantidad</label><input type="number" class="qty" value="1" min="1">
                        <button class="btn" onclick="addToOrder(this,'Refresco 600ml')">Agregar</button>
                    </div>

                </section>

                <!-- SALSAS (solo informativo) -->
                <section class="section">
                    <h2>üßÇ Salsas & Aderezos (porci√≥n $15 c/u)</h2>
                    <p class="small">Lista de salsas disponibles (se usar√°n en los selects donde corresponde):</p>
                    <ul class="small">
                        <li>1. Bufalo</li>
                        <li>2. BBQ</li>
                        <li>3. BBQ Hot</li>
                        <li>4. Mango Habanero</li>
                        <li>5. Tamarindo</li>
                        <li>6. Naranja chipotle</li>
                        <li>7. Sriracha</li>
                        <li>8. Pimienta Lim√≥n</li>
                        <li>11. Ranch</li>
                        <li>12. Ranch jalape√±o</li>
                        <li>13. Salsa de chipotle</li>
                    </ul>
                </section>

            </main>


            <!-- ASIDE (derecha) -->
            <aside>
                <div id="orderBox">
                    <h3>üõí Tu pedido</h3>
                    <div id="orderText">A√∫n no has agregado nada.</div>

                    <div style="margin-top:10px">
                        <label>Nombre</label>
                        <input id="nombre" type="text" placeholder="Tu nombre">

                        <label>Tel√©fono</label>
                        <input id="telefono" type="text" placeholder="Ej: 8661234567">

                        <label class="small">
                            <input type="checkbox" id="domicilio" onchange="toggleDomicilio()" />
                            ¬øPedido a domicilio?
                        </label>

                        <label>Direcci√≥n</label>
                        <input id="direccion" type="text" placeholder="Calle, n√∫mero, colonia">

                        <label>Ubicaci√≥n (mapa)</label>
                        <div class="inline-row">
                            <input id="ubicacion" type="text" placeholder="Pega link o usa GPS">
                            <button class="btn secondary" onclick="fillLocation()">GPS</button>
                        </div>

                        <label class="small">Comentarios / indicaciones (ej. sin pepino, extra picante)</label>
                        <input id="comentarios" type="text" placeholder="Comentarios">

                        <button class="btn" onclick="sendWhatsApp()">Enviar pedido por WhatsApp</button>

                        <button class="btn secondary" style="margin-top:8px" onclick="clearOrder()">Vaciar
                            pedido</button>
                    </div>
                </div>

                <div style="height:18px"></div>
                <p class="small" style="text-align:center;margin-top:12px">Atenci√≥n: al presionar enviar se abrir√°
                    WhatsApp con el mensaje listo para enviar al n√∫mero de Buchi Sushi.</p>
            </aside>
        </div>

        <footer> ¬© Buchi Sushi ‚Äî Men√∫ Digital</footer>
    </div>

    <button id="fab" class="fab">
        üõí
        <span id="fabBadge" class="badge">0</span>
    </button>

    <script>
        // Config
        const WHATSAPP_FULL = "528662133465"; // +52 866 213 3465 -> formato para wa.me/ (sin +)
        const SAUCES = [
            "1. Bufalo",
            "2. BBQ",
            "3. BBQ Hot",
            "4. Mango Habanero",
            "5. Tamarindo",
            "6. Naranja chipotle",
            "7. Sriracha",
            "8. Pimienta Lim√≥n",
            "11. Ranch",
            "12. Ranch jalape√±o",
            "13. Salsa de chipotle"
        ];

        // Rellenar selects de salsas en todos los platos que tengan .s1/.s2
        function fillSauceOptions() {
            document.querySelectorAll(".s1, .s2").forEach(select => {
                // limpiar opciones excepto la primera (Selecciona)
                select.innerHTML = "<option value=''>Selecciona</option>";
                SAUCES.forEach(s => {
                    const opt = document.createElement("option");
                    opt.value = s;
                    opt.textContent = s;
                    select.appendChild(opt);
                });
            });
        }
        fillSauceOptions();

        // Pedido en memoria
        let order = [];

        function addToOrder(btn, name) {
            const dishEl = btn.closest(".dish");
            const qtyEl = dishEl.querySelector(".qty");
            const qty = parseInt(qtyEl?.value || 1);
            const price = dishEl.dataset.price ? Number(dishEl.dataset.price) : 0;
            const hasSalsas = dishEl.dataset.hassalsas === "true";

            let s1 = hasSalsas && dishEl.querySelector(".s1") ? dishEl.querySelector(".s1").value : "";
            let s2 = hasSalsas && dishEl.querySelector(".s2") ? dishEl.querySelector(".s2").value : "";

            // Build item
            const item = {
                name: name,
                qty: qty,
                price: price,
                s1: s1 || null,
                s2: s2 || null
            };

            order.push(item);
            renderOrder();
            updateFabBadge(); // ‚Üê NUEVO
        }

        function removeItem(index) {
            order.splice(index, 1);
            renderOrder();
            updateFabBadge();
        }


        function renderOrder() {
            const box = document.getElementById("orderText");

            if (order.length === 0) {
                box.textContent = "A√∫n no has agregado nada.";
                updateFabBadge();
                return;
            }

            let html = "";
            let total = 0;

            order.forEach((it, i) => {

                html += `
      <div style="
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 8px;
        padding: 0;
        line-height: 1;
        font-size: 13px;
      ">
        
        <div style="margin:0; padding:0; line-height:1;">
          <span style="font-weight:bold;">${it.name}</span> x${it.qty} 
          <span style="color:#e41e2b;">$${it.price * it.qty}</span>

          ${(it.s1 || it.s2)
                        ? `<div style="margin:0; padding:0; line-height:1; font-size:12px; color:#666;">
                ${it.s1 || "-"} | ${it.s2 || "-"}
              </div>`
                        : ""
                    }
        </div>

        <button 
          onclick="removeItem(${i})"
          style="
            background:none;
            border:none;
            font-size:14px;
            cursor:pointer;
            padding:0;
            margin:0;
            line-height:1;
            color:#aa0000;
          "
        >üóëÔ∏è</button>

      </div>
    `;

                total += it.price * it.qty;
            });

            html += `
    <div style="margin-top:4px; font-weight:bold; font-size:14px; line-height:1;">
      Total: $${total}
    </div>
  `;

            box.innerHTML = html;
            updateFabBadge();
        }


        function clearOrder() {
            if (!confirm("¬øDeseas vaciar el pedido?")) return;
            order = [];
            renderOrder();
            document.getElementById("comentarios").value = "";
        }

        // Geolocation: obtiene lat/lng y pone link de Google Maps
        function fillLocation() {
            if (!navigator.geolocation) return alert("Tu navegador no soporta GPS.");
            const btn = event?.target;
            const old = btn ? btn.textContent : null;
            if (btn) btn.textContent = "Obteniendo‚Ä¶";
            navigator.geolocation.getCurrentPosition(pos => {
                const lat = pos.coords.latitude.toFixed(6);
                const lng = pos.coords.longitude.toFixed(6);
                const url = `https://www.google.com/maps?q=${lat},${lng}`;
                document.getElementById("ubicacion").value = url;
                if (btn) btn.textContent = old;
            }, err => {
                if (btn) btn.textContent = old;
                alert("No se pudo obtener la ubicaci√≥n. Aseg√∫rate de permitir el acceso a la ubicaci√≥n.");
            }, { timeout: 10000 });
        }

        function updateFabBadge() {
            const badge = document.getElementById("fabBadge");
            const count = order.reduce((sum, item) => sum + item.qty, 0);
            badge.textContent = count;
            badge.style.display = count > 0 ? "flex" : "none";
        }

        function toggleDomicilio() {
            const check = document.getElementById("domicilio").checked;
            const dir = document.getElementById("direccion");

            if (check) {
                dir.placeholder = "Calle, n√∫mero, colonia";
                dir.disabled = false;
            } else {
                dir.value = "";
                dir.disabled = true;
                dir.placeholder = "No aplica";
            }
        }


        // Enviar por WhatsApp (abre wa.me con texto preformateado)
        function sendWhatsApp() {
            if (order.length === 0) return alert("Agrega al menos un platillo al pedido.");

            const nombre = document.getElementById("nombre").value.trim();
            const telefono = document.getElementById("telefono").value.trim();
            const direccion = document.getElementById("direccion").value.trim();
            const ubicacion = document.getElementById("ubicacion").value.trim();
            const comentarios = document.getElementById("comentarios").value.trim();
            const isDomicilio = document.getElementById("domicilio")?.checked || false;

            if (!nombre) return alert("Por favor ingresa tu nombre.");
            if (!telefono) return alert("Por favor ingresa tu tel√©fono.");

            // Direcci√≥n obligatoria solo si es pedido a domicilio
            if (isDomicilio && !direccion) {
                return alert("Por favor ingresa tu direcci√≥n para el env√≠o a domicilio.");
            }

            // Armar el mensaje del pedido
            let msg = `Pedido para Buchi Sushi\n\n`;

            order.forEach((it, idx) => {
                msg += `${idx + 1}) ${it.name} x${it.qty}\n`;

                if (it.s1 || it.s2) {
                    msg += `   Salsa 1: ${it.s1 || "-"}\n`;
                    msg += `   Salsa 2: ${it.s2 || "-"}\n`;
                }

                if (it.price) {
                    msg += `   Precio unitario: $${it.price}\n`;
                    msg += `   Subtotal: $${it.price * it.qty}\n`;
                }

                msg += `\n`;
            });

            msg += `-----\n`;
            msg += `Nombre: ${nombre}\n`;
            msg += `Tel: ${telefono}\n`;
            msg += `Pedido a domicilio: ${isDomicilio ? "S√≠" : "No"}\n`;

            if (isDomicilio) {
                msg += `Direcci√≥n: ${direccion}\n`;
            }

            if (ubicacion) {
                msg += `Ubicaci√≥n: ${ubicacion}\n`;
            }

            if (comentarios) {
                msg += `Comentarios: ${comentarios}\n`;
            }

            msg += `\nEnviado desde men√∫ digital Buchi Sushi`;

            const encoded = encodeURIComponent(msg);
            const url = `https://wa.me/${WHATSAPP_FULL}?text=${encoded}`;
            window.open(url, "_blank");
        }


        // Inicial render
        renderOrder();
        toggleDomicilio();

        document.getElementById("fab").addEventListener("click", () => {
            const form = document.getElementById("orderBox");
            if (form) {
                form.scrollIntoView({ behavior: "smooth" });
            }
        });

    </script>
</body>

</html>